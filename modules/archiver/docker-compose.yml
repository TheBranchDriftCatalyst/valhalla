version: "3"

services:


  mongodb:
    image: mongo:latest
    ports:
      - "#{MONGODB_PORT}:27017"
      # - "27017:27017"
    volumes:
      - ./volumes/mongodb:/data/db

  minio:
    image: minio/minio:RELEASE.2022-03-17T06-34-49Z
    ports:
      - "#{MINIO_API_PORT}:9000"
      - "#{MINIO_API_PORT}:9001"
    environment:
      - MINIO_ACCESS_KEY
      - MINIO_SECRET_KEY
    volumes:
      - ./volumes/minio:/minio_data
    command: minio server /minio_data --console-address ":9001"
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:9000/minio/health/live"]
      interval: 30s
      timeout: 20s
      retries: 3

  qdrant:
    image: qdrant/qdrant
    ports:
      - "#{QDRANT_PORT}:6333"
    volumes:
      - ./volumes/qdrant:/qdrant/storage
